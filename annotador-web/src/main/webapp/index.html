
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>annotador demo</title>
    <link rel="stylesheet" type="text/css" href="css/style-vis.css">
    <script type="text/javascript" src="js/head.js"></script>
    <link rel='shortcut icon' href='favicon.ico' type='image/x-icon' />
	<style>
            
#legend-block {
  
  position: relative;
  margin-top: 1.5rem;
}
#table-legend {
  padding: 0px;
  border: 1px solid;
}
#inset-label {
  font-size: 1rem;
  padding: 5px;
  position: absolute;
  z-index: 1;
  background-color: white;
  left: 30px;
  top: -1em;
} 

td.color {
  width: 20px;
  height: 20px;
    border-style:solid;
    border-color: white;
    border-width: 7px;
}

td.label {
  vertical-align: middle;
  padding: 0px;
    text-align: left; 
    font-size: 13px;
}

td.labelexpl {
  vertical-align: middle;
    padding: 0.5rem; 
    padding-top: 0;
    text-align: justify; 
    font-size: 0.8rem;
}

td.legend {
  width: 10%;
    border: 1px solid #ccc;
}

#buttager {
  font-size: 0.9rem;
}

#colordate { background-color: #7fa2ff; }
#colortime { background-color: #ffbb99; }
#colorset { background-color: #ccb3ff; }
#colorduration { background-color: #99ffeb; }
   
.item1 { grid-area: header; 
}
.item2 { grid-area: menu; }
.item3 { grid-area: main; }
.item4 { grid-area: right; }
.item5 { grid-area: footer; 
padding-left: 5rem;
padding-right: 5rem;}

.grid-container {
  display: grid;
  grid-template-areas:
    'header header header header header header '
    'main main main main menu right '
    'footer footer footer footer footer footer ';
  grid-gap: 20px;
  padding: 20px;
}

header, .full-width {
  width: 100%;
  background: #ccc;
}

.wrap {
  width: 80%;
  max-width: 24em;
  margin: 0 auto;
  padding: 0.25em 0.625em;
}

.grid-container > div {
  text-align: center;
}


h2 {
  text-align: center;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  grid-gap: 20px;
  font-family: Alegreya, serif;
  font-size: 30px;
}

h1 {
  text-align: center;
  display: grid;
  grid-gap: 20px;
  font-family: Alegreya, serif;
  font-size: 120%;
}

@supports (display: grid) {
  h2:before,
  h2:after {
    content: "";
    align-self: center;
    border-top: 1px solid #999;
  }
  
}
h1, .full-width {
  position: relative; /* child absolute */
  margin: 0 -9999rem;
  /* add back section padding value */
  padding: 20px 9999rem;
  background: #666;
  background: rgba(0, 0, 0,.5);
  color: white;
}

</style>
</head>

<body>

<link rel="stylesheet" type="text/css" href=" css/main.css" />
        
    <!-- multistep form -->
<div id="msform" class="grid-container">
  <!-- progressbar -->
  <!--ul id="progressbar">
    <li class="active">Submit the original text full of legal references</li>
    <li>Get a version optimal for temporal annotation</li>
    <li>Get back your legal references</li>
  </ul-->
  <!-- fieldsets -->
<div class="item1">
          <img width="60%" src="img/banner.svg" alt="TITLE - annotador" style="margin-bottom: 50px;">
		  <h2 class="fs-title">Temporal Tagger for the legal domain</h2>
</div>
<div class="item3">
          <h3 class="fs-subtitle">Introduce your text</h3>
          <input type="text" name="inputText" id="inputText" placeholder="Hoy es día 3 de octubre" />
		  
		  		  <h3 class="fs-subtitle">An example: "En la presente base de datos se recogen los elementos inscritos en el registro creado via el Real Decreto 2093/2008, de 19 de diciembre. Ha sido actualizado por ultima vez el 13 de agosto de 2017."</h3>
		  
          <input type="text" name="inputDate" id="inputDate" placeholder="YYYY-MM-DD" style="width: 120px;"/>
          <h3 class="fs-subtitle">Please introduce the anchor date with format YYYY-MM-DD. Unvalid dates will not be considered.</h3>
		  
          
          
          <button id="buttager" onclick="start()" style="margin-bottom: 50px;">Submit</button>

		  
<!-- load all the libraries upfront, which takes forever. -->
<script type="text/javascript" src="js/brat_loader.js"></script>


<!-- let's do the configuration -->
<script type="text/javascript">
var collData = {
    entity_types: [ {
            type   : 'DATE',
            labels : ['DATE', 'D'],
            bgColor: '#7fa2ff',
            borderColor: 'darken'
    },
{
            type   : 'TIME',
            labels : ['TIME', 'T'],
            bgColor: '#7fa2ff',
            borderColor: 'darken'
    },
{
            type   : 'SET',
            labels : ['SET', 'S'],
            bgColor: '#7fa2ff',
            borderColor: 'darken'
    },
{
            type   : 'DURATION',
            labels : ['DURATION', 'DUR'],
            bgColor: '#7fa2ff',
            borderColor: 'darken'
    }	]
};
</script>


<!-- we simply call it inside a script element -->
<script type="text/javascript">
var docData = {
    'text': 'Hoy es día 3 de octubre',
    'entities': [
[
            'T1',
            'DATE',
            [ [ 0, 3 ] ]
        ],
[
            'T2',
            'DATE',
            [ [ 7, 23 ] ]
        ],
],
};
</script>



<div id="embedding-live-examplemain" style="display:none;"><div id="embedding-live-example"></div></div>
<!--div id="embedding-live-example"  style="display:none"></div-->

<div id="live-io">
    <p>
        <!--<textarea id="coll-input" style="display:block;float:left;width:40%;height:400px;font-size:11px;border:2px inset"-->
        <textarea id="coll-input" style="display:none;"
           ></textarea>
        <!--<textarea id="doc-input" style="display:block;float:right;width:55%;height:400px;font-size:11px;border:2px inset">-->
        <textarea id="doc-input" style="display:none;"
            ></textarea>
    </p>
</div>

<!-- override a few style-vis.css settings for the embedded version to make things larger -->
<style type="text/css">
text { font-size: 15px; }
.span text { font-size: 10px; }
.arcs text { font-size: 9px; }
</style>

<script>
        var asyncRequest;    
        function start(){
    try
    {
        asyncRequest = new XMLHttpRequest();
        asyncRequest.addEventListener("readystatechange", stateChange, false);
        asyncRequest.open('GET', 'annotate2' + "?inputText=" + encodeURIComponent($('#inputText').val()) + "&inputDate=" + encodeURIComponent($('#inputDate').val()), true);    
        asyncRequest.send(null);
    }
    catch(exception)
   {
    alert("Request failed");
   }
}

function stateChange(){
    
    var text = document.getElementById("doc-input"); 
    var formato = document.getElementById("coll-input"); 
    eval(asyncRequest.responseText);
    text.innerHTML = JSON.stringify(x); 
    var event = new Event('change');
    text.dispatchEvent(event);
    formato.innerHTML = JSON.stringify(y); 
    var event2 = new Event('change');
    formato.dispatchEvent(event2);
    document.getElementById("embedding-live-examplemain").style.display = "inline";
    
}

        
        </script>

<script type="text/javascript">

    head.ready(function() {
        var collInput = $('#coll-input');
        var docInput = $('#doc-input');
        var liveDiv = $('#embedding-live-example');

        // Time for some "real" brat coding, let's hook into the dispatcher
        var liveDispatcher = Util.embed('embedding-live-example',
                $.extend({'collection': null}, collData),
                $.extend({}, docData), webFontURLs);

        var renderError = function() {
            // liveDiv.css({'border': '2px solid red'}); // setting this blows the layout
            collInput.css({'border': '2px solid red'});
            docInput.css({'border': '2px solid red'});
        };

        liveDispatcher.on('renderError: Fatal', renderError);

        var collInputHandler = function() {
            var collJSON;
            try {
                collJSON = JSON.parse(collInput.val());
                collInput.css({'border': '2px inset'});
            } catch (e) {
                // Not properly formatted JSON...
                collInput.css({'border': '2px solid red'});
                return;
            }

            try {
                liveDispatcher.post('collectionLoaded',
                        [$.extend({'collection': null}, collJSON)]);
                //liveDiv.css({'border': '2px inset'});  // setting this blows the layout
                docInput.css({'border': '2px inset'});
            } catch(e) {
                console.error('collectionLoaded went down with:', e);
                //liveDiv.css({'border': '2px solid red'});
                collInput.css({'border': '2px solid red'});
            }
        };

        var docInputHandler = function() {
            var docJSON;
            try {
                docJSON = JSON.parse(docInput.val());
                docInput.css({'border': '2px inset'});
            } catch (e) {
                docInput.css({'border': '2px solid red'});
                return;
            }

            try {
                liveDispatcher.post('requestRenderData', [$.extend({}, docJSON)]);
                // liveDiv.css({'border': '2px inset'});  // setting this blows the layout
                collInput.css({'border': '2px inset'});
            } catch(e) {
                console.error('requestRenderData went down with:', e);
                // liveDiv.css({'border': '2px solid red'});
                collInput.css({'border': '2px solid red'});
            }
        };

        // Inject our current example as a start
        var collJSON = JSON.stringify(collData, undefined, '    ');
        docJSON = JSON.stringify(docData, undefined, '    ')
        // pack those just a bit
        var packJSON = function(s) {
            // replace any space with ' ' in non-nested curly brackets
            s = s.replace(/(\{[^\{\}\[\]]*\})/g, 
                          function(a, b) { return b.replace(/\s+/g, ' '); });
            // replace any space with ' ' in [] up to nesting depth 1
            s = s.replace(/(\[(?:[^\[\]\{\}]|\[[^\[\]\{\}]*\])*\])/g, 
                          function(a, b) { return b.replace(/\s+/g, ' '); });
            return s
        }
        collInput.text(packJSON(collJSON));
        docInput.text(packJSON(docJSON));

        var listenTo = 'propertychange keyup input paste change';
        collInput.bind(listenTo, collInputHandler);
        docInput.bind(listenTo, docInputHandler);
    });
</script>

</div>
<div class="item4">
<div id="legend-block">
<table id="table-legend">
<tr>
<td class="legend">
    <table> <tr>
        <td class="color" id="colordate"</td>
        <td class="label"><b>DATE</b></td>
        <tr>
            <td colspan="2" class="labelexpl">Calendar or relative expressions such as 'October 7, 1991', '22/01/2018', or '1992', and also relative expressions like 'Two days ago'.</td>
        </tr>
    </tr></table></td>
    </tr><tr>
<td class="legend">
    <table><tr>
	<td class="color" id="colortime"></td>
        <td class="label"><b>TIME</b></td>
        <tr>
            <td colspan="2" class="labelexpl">Points in time ('At seven o'clock', '22:30'...), absolute or relative ('One hour ago')</td>
        </tr>
    </tr></table></td>
    </tr><tr>
<td class="legend">
    <table><tr>
	<td class="color" id="colorset"></td>
        
        <td class="label"><b>SET</b></td>
        <tr>
            <td colspan="2" class="labelexpl">Repetitions in time (such as 'Monthly', 'Twice a week'...)</td>
        </tr>
    </tr></table></td>
    </tr><tr>
<td class="legend">
    <table><tr>
        <td class="color" id="colorduration"></td>
	<td class="label"><b>DURATION</b></td>
        </tr>
        <tr>
            <td colspan="2" class="labelexpl">Amounts of time like 'Two days', 'Three years and six months' or 'Half an hour'.</td>
        </tr>
    </table></td>
</tr>
</table>
<div id="inset-label">Legend</div>
</div>

</div>
  <div class="item5" text-align="center">
      <small><center><a href="https://github.com/mnavasloro/annotador"><img src="img/aboutme3.png" width="80"  align="left"/></a><center><a href="http://www.oeg-upm.net/"><img src="img/oeg.gif" width="80"  align="right"/></a><p style="display: inline; vertical-align: middle"><br>This work is part of the PhD thesis by María Navas-Loro at the Ontology Engineering Group (Universidad Politécnica de Madrid). Please visit her <a href="http://marianavas.oeg-upm.net">website</a> or the <a href="https://github.com/mnavasloro/annotador">GitHub</a> repository for more information.</p></small><br/>
</center>

</div>

</div>



</body>
</html>